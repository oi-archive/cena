\C{startjudge} 开始评测

\S0{neworopen} 新建或打开一次竞赛
 
选择“文件 新建或打开一次竞赛”，将弹出一个对话框，对话框中有三个页面。

\b 如果要新建一次竞赛，则进入“新建”页面，填好相关的信息，包括标题和存放的文件夹（此文件夹即为竞赛文件夹）。

\b 如果要打开原有的竞赛，可以在“最近”页面选择，也可以在“指定”页面中指定一个路径打开。

新建或打开一次测试后，主界面上将出现三个页面，分别是“试题”、“选手”和“分析”。

注意：评测系统标示竞赛文件夹的方式是在其目录下建立一个文件 \c{.cena}。如果此文件不存在，将不能作为一次竞赛被打开，所以请不要将这个文件当作不需要的文件删除了。同样的文件还有 \c{data\\.data} 文件。
　

\S0{dataconf} 为一次竞赛配置数据
 
新建或打开一次测试后，在主界面上找到“试题”页面，这里可以编辑和配置数据信息。左边的为试题和测试点列表，右边为详细信息。在填写数据文件名时，应该填数据文件对于“竞赛文件夹\\data”的路径，所有的数据文件都应该在“竞赛文件夹\\data”下。

配置数据主要有以下操作：

\b 添加一道试题 在试题列表点击右键，选择“添加试题”。 

\b 删除一道试题 选中一道题目，选择“删除”。 

\b 编辑题目信息 选中要编辑的题目，即可在右边的“详细信息”框中编辑相关的信息。题目的信息包括：标题、源文件名（不带文件后缀，后缀由编程语言决定，具体参见: \R{configlanguages}{配置编程语言}）、输入文件名（如有多个，请分行填写）、输出文件名、校验方式（参见: \R{eval}{输出文件的比较与评分}）、自定义校验程序路径。 

\b 添加一个测试点 选中一道题目，选择“添加测试点”。 

\b 添加其他测试点 选中一道题目，选择“添加其他测试点”。只要先配好一个测试点，系统会根据文件名中存在的数字的规律，自动添加好其他的测试点。 

\b 删除一个测试点 选中一个测试点，选择“删除” 

\b 编辑测试点信息 选中要编辑的测试点，即可在右边的“详细信息”框中编辑相关的信息。测试点的信息包括：标准输入文件（必须与题目中输入文件的个数相同，有多个则分行填写）、标准输出文件、分值、时间限制、内存限制。 


\S1{eval} 输出文件的比较与评分
 
输出文件的比较与评分方式有三种：

\b 逐字节比较。 将对标准输出文件与选手的输出文件进行逐字节的比较。完全相同得全分，否则得 0 分。若发现差别，校验信息（查看校验信息参见: \R{viewresult}{查看评测结果}）将会提示第一次差异在第几个字符。 

\b 忽略多余空格及最后的空行。 在比较时，行首空格、行尾空格将被忽略掉，行中的多个空格将被压缩为一个空格，文件尾的空行也将被忽略掉。忽略后完全相同得全分，否则得 0 分。若发现差别，校验信息(查看校验信息参见: \R{viewresult}{查看评测结果})将会提示第一次差异在第几行、第几列，以及附近的一些字符。例如： 

\\<p align=center\\>\\<img src=images/eval.gif /\\>\\</p\\>

\b 使用自定义校验程序(参见: \R{customchecker}{自定义校验器说明})。因为比较与评分的标准可能因题而异，所以评测系统允许用户编写自定义校验程序。自定义校验程序必须是可执行文件。通过参数获取必要的信息；通过文件输出返回校验结果。 



\S1{customchecker} 自定义校验器说明
 
\\<b\\>获取必要的信息\\</b\\>

\b 待测的测试点的最高分 \c{ParamStr(1)}(Pascal) 或 \c{argv[1]}(C/C++)

\b 标准输出文件名 \c{ParamStr(2)}(Pascal) 或 \c{argv[2]}(C/C++)

\b 标准输入和选手输出同数据配置。

\\<b\\>结果返回\\</b\\>

\b 得分返回文件 \c{score.log} 只有一行，为这个测试点的得分。可使用小数。

\b 返回校验信息 \c{report.log} 若没有此文件，或此文件的内容为空，则没有校验信息，反之则将在评测结果右侧显示“(?)”，点击则显示信息。(参见: \R{viewresult}{查看评测结果})。

\\<b\\>交互单元\\</b\\>

本评测系统提供了编写校验程序的交互单元，以方便使用 Pascal 语言编写自定义校验程序。

\c{libcheck.pas}(位置：\c{安装路径\\lib\\}) 说明如下：

变量：

\c std: Text;                        { 用于读取标准输出文件 }

\c rep: Text;                        { 用于写入校验信息 }

\c fso: Double;                      { 为这个测试点的满分 }

过程：

\c procedure Score(AScore: Double);  { 用于向评测系统报告得分 }

\c procedure Finish;                 { 结束 }

使用举例 (Pascal语言): 

\c \\<b\\>uses\\</b\\>
\c   libcheck;
\c \\<b\\>var\\</b\\>
\c   a,b,c,stc: integer;
\c \\<b\\>begin\\</b\\>
\c   assign(input, 'add.in'); { 试题的输入文件名 }
\c   reset(input);
\c   readln(a, b);
\c   close(input);
\c   assign(input, 'add.out'); { 试题的输出文件名，由选手程序输出 }
\c   reset(input);
\c   readln(c);
\c   close(input);
\c   read(std,stc); { 从标准输出文件中读取标准答案 }
\c 
\c   writeln(rep,'这个测试点的输入为：',a,' ',b);
\c   writeln(rep,'标准输出为：',stc);
\c   writeln(rep,'选手输出为：',c);
\c   \\<b\\>if\\</b\\> stc=c \\<b\\>then\\</b\\> \\<b\\>begin\\</b\\>
\c     writeln(rep, '正确。');
\c     Score(fso); { 得满分 }
\c   \\<b\\>end\\</b\\>
\c   \\<b\\>else\\</b\\> \\<b\\>begin\\</b\\>
\c     writeln(rep, '错误。');
\c     Score(0); { 得 0 分 }
\c   \\<b\\>end\\</b\\>;
\c   writeln(rep, '本自定义校验程序由 *** 提供。仅供示例。');
\c   Finish;
\c \\<b\\>end\\</b\\>;

查看评测结果时，将会看到如下信息：

\\<img src=images/checkmsg.png /\\>　


\\<b\\>建议\\</b\\>

请使用 32 位编译器(如 Free Pascal, Delphi, GCC )来编译您的校验程序，以加快评测的速度。



\S0{programs} 选手程序
 
测试文件夹下的 \c{src} 文件夹，是存放选手程序的。其中的每一个文件夹为一名选手，称为选手文件夹，文件夹名称即为选手名称。选手的程序必须直接放在选手文件夹下，不能放在其子目录下。若要测试某选手的程序，可以将其文件夹复制到 \c{src} 文件夹下，也可以通过网络收取（参见: \R{gatherbynet}{通过网络收取}）。


\S1{gatherbynet} 通过网络收取

如果使用了客户端程序，就可以通过局域网收取客户端上选手的程序。

关于文件收取的设置（“工具 - 选项”的常规页面）有两项：

\b 文件名限制

\b 文件大小限制

文件名限制有两个选项：

\b 只收取与竞赛相关的文件 ―― 若此项被标记，则只会收取文件名（不包括文件后缀）与竞赛题目名称相同的文件。

\b 是否只收取能被评测的文件 ―― 若此项被标记，则只会收取文件名后缀存在于编译语言列表中的文件。

打开一次竞赛后，在选手列表上(选手页面)，选定要收取程序的客户端(图标为\\<img src=images/image001.png /\\>或\\<img src=images/image002.png /\\>，位置为\c{LR}或\c{-R})，点击下面的“收取”按钮(或者使用右键菜单的“收取”)。点击收取后，评测系统将会弹出一个消息列表，显示收取的情况。

\\<img src=images/msgform.png /\\>


\S0{judge} 评测
 
需要评测时，先在选手列表上选定需要评测的选手，然后点击列表下面的“评测”(或者使用右键菜单的“评测”)。点击评测后，评测系统将会弹出一个评测窗口，显示当前的评测情况。在评测的过程中，也可以在选手列表上选定选手评测，这些选手将加入到评测队列的末尾。

正在评测的选手，在选手列表上的状态将会变为“正在评测”；等待评测的选手，在选手列表上的状态将会变为“等待评测”；已经完成评测的选手，在选手列表上的状态则为“已评测”。


\S0{viewresult} 查看评测结果
 
对已经完成评测的选手，可以查看其评测结果。

双击一位已经完成评测的选手(也可点击右键选择“查看评测结果”)，即可看见他的详细得分情况(包括每个测试点的得分、有效用时和占用的内存大小)。

当存在校验信息时，评测结果的右侧会出现“(?)”，点击即可查看校验信息(校验信息的内容参见: \R{eval}{输出文件的比较与评分})。

\\<img src=images/checkmsg.png /\\>


\S0{analyze} 对评测结果进行统计分析
 
评测结束后，可以在“统计与分析”页面进行统计分析操作。

在“统计与分析”页面上，有两个列表。左侧的为选手列表，右侧的为试题列表。

在选手列表上选择好参与统计的选手（在行首的方框内单击，打上勾），点击下面的“统计选定选手的成绩”后，右侧的试题列表就会显示统计的结果。 
在试题列表上选择好参与统计的试题或测试点，再点击下面的“按选定试题的成绩排名”，左侧的选手列表就会显示统计的结果。 



\S0{printandexport} 打印和导出评测结果
 
评测结束后，可以将评测结果打印或导出。选择主菜单“文件 打印或导出”，评测系统将会弹出“打印和导出”对话框。

\\<b\\>打印\\</b\\>。打印之前需要先进行打印设置，点击下面的“打印设置”按钮就会弹出“打印设置”对话框。打印设置包括页边距、页脚（注意：页脚的空间 也包括在页边距里面）、打印机和打印字体。打印的内容可以选择“排名表”和“报告”。

\b 打印排名表。打印排名表将会把所有人的评测结果都包括进去。可以选择“紧凑 样式”和“简单样式”两种样式。

\\<ul\\>

\b 紧凑样式的样式为一人一行，每行首先是选手名称，然后是各个测试点用字母或符号标示的评测结果，每一页的页脚为各个字母和字符的意义。 

\\<img src=images/print1.png /\\>

\b 简单样式的打印的结果为一个表格，表格包括 4 列，分别为选手名称、排名、总得分、总有效用时。 

\\<img src=images/print2.png /\\>

\\</ul\\>

\b 打印成绩单。打印成绩单是针对个人的，因此在打印之前，需要先在对话框上选择需要打印结果的选手。可以选择“紧凑型”和“详细型”两种样式。

\\<ul\\>

\b 这里的紧凑样式和排名表的紧凑型其实是一样的，只是这里只会打印选定的选手的成绩。 

\\<img src=images/print3.png /\\>

\b 详细样式的打印结果将包含所有具体的信息。 

\\<img src=images/print4.png /\\>

\\</ul\\>

\\<b\\>导出\\</b\\>。评测系统也可以将评测结果导出成 Excel 表格(csv 类型)。导出的内容同样包括“排名表”和“报告”，一切与打印的结果相仿。

\b 导出排名表。导出的情况与打印基本相同。

\\<ul\\>

\b 紧凑样式： 

\\<img src=images/export1.png /\\>

\b 简单样式： 

\\<img src=images/export2.png /\\>

\\</ul\\>

\b 导出成绩单。与打印相同，在打印之前，需要先在对话框上选择需要导出结果的选手。

\\<ul\\>

\b 紧凑样式： 

\\<img src=images/export3.png /\\>

\b 详细样式： 

\\<img src=images/export4.png /\\>

\\</ul\\>

\S0{close} 关闭竞赛
 
点击主菜单“文件-关闭竞赛”，即可关闭当前竞赛。关闭时，当前竞赛对数据的配置和评测的结果都会保存下来，下一次打开时将保留原样。


